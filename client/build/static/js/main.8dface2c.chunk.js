(this.webpackJsonpprosjektoppgave_ui2=this.webpackJsonpprosjektoppgave_ui2||[]).push([[0],{125:function(e,t,n){},134:function(e,t,n){},174:function(e,t,n){},178:function(e,t,n){},185:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(1),c=n.n(r),i=n(25),o=n.n(i),s=(n(121),n(122),n(123),n(124),n(125),n(17)),l=n(15),u=n(20),j=n(21),p=n(82),d=n(87),b=n(83),h=n(86),g=n(85),O=n(107),x=n.n(O),m=n(195),f=n(196),v=n(197),k=n(115),S=n(109),D=n.n(S),y=n(43),P=n(34),w=n(18),C=n(110);n(134);function G(){var e=c.a.useState([]),t=Object(w.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)([{value:"vvs",label:"VVS"},{value:"bro",label:"Bro"},{value:"vei",label:"Vei"},{value:"ruh",label:"RUH"},{value:"parsellnr",label:"Parsellnummer"},{value:"marked",label:"Marked/Annonsebilder"}]),s=Object(w.a)(o,2),l=s[0],u=s[1],j=Object(r.useCallback)((function(e){var t={value:e.toLowerCase(),label:e};u([].concat(Object(P.a)(l),[t])),i(t)}),[l]);return Object(a.jsx)(C.a,{className:"multi-select",isClearable:!0,onSortEnd:function(e){var t,a,r,c=e.oldIndex,o=e.newIndex,s=(a=c,r=o,(t=(t=n).slice()).slice(r<0?t.length+r:r,0,t.splice(a,1)[0]),t);i(s),console.log("Values sorted:",s.map((function(e){return e.value})))},isMulti:!0,value:n,options:l,onChange:function(e){return i(e)},onCreateOption:j,placeholder:"velg kategori",closeMenuOnSelect:!1})}var N=n(111),M=n.n(N),A=n(199),V=function(e){var t=Object(r.useState)([new Date,new Date]),n=Object(w.a)(t,2),c=n[0],i=n[1];console.log(c);return Object(a.jsx)("div",{children:Object(a.jsx)(M.a,{onChange:i,value:c,locale:!0,onCalendarClose:function(){var e;Object(A.a)(c[0]),e=Object(A.a)(c[1]),console.log(e)}()})})},I=n(198),z=function(e){var t=Object(r.useState)(!1),n=Object(w.a)(t,2),c=n[0],i=n[1];return Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:["Velg prosjekt: ",Object(a.jsx)("span",{style:{textDecoration:"underline",color:"blue"},href:"#",id:"Prosjekt",children:"(info)"})]}),Object(a.jsx)(I.a,{placement:"top",isOpen:c,target:"Prosjekt",toggle:function(){return i(!c)},children:"Velg prosjekt du vil sortere bildefilene for"})]})},E=function(e){var t=Object(r.useState)(!1),n=Object(w.a)(t,2),c=n[0],i=n[1];return Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:["Sorter p\xe5 dato (fra-til): ",Object(a.jsx)("span",{style:{textDecoration:"underline",color:"blue"},href:"#",id:"Date",children:"(info)"})]}),Object(a.jsx)(I.a,{placement:"top",isOpen:c,target:"Date",toggle:function(){return i(!c)},children:"Velg et datointervall du \xf8nsker \xe5 sortere bildefilene p\xe5"})]})},U=function(e){var t=Object(r.useState)(!1),n=Object(w.a)(t,2),c=n[0],i=n[1];return Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:["Sorter p\xe5 kategorier: ",Object(a.jsx)("span",{style:{textDecoration:"underline",color:"blue"},href:"#",id:"Multi",children:"(info)"})]}),Object(a.jsx)(I.a,{placement:"top",isOpen:c,target:"Multi",toggle:function(){return i(!c)},children:"Velg kategori/er du \xf8nsker \xe5 sortere bildefilene p\xe5"})]})},L=n(2),T=n.n(L),B=n(9),K=n(189),F=n(190),H=n(191),R=n(192),_=n(193),q=n(194),J=n(53),Q=(n(174),"localhost"===window.location.hostname?"http://localhost:1337/api/images":"another-adress");function W(){return(W=Object(B.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Q);case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(B.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,fetch("".concat(Q,"/").concat(t));case 3:return n=e.sent,e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return $.apply(this,arguments)}function $(){return($=Object(B.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Q,"/image/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.text().then((function(e){return console.log(e)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return new Promise((function(e){navigator.geolocation.getCurrentPosition((function(t){e({lat:t.coords.latitude,lng:t.coords.longitude})}),(function(){e(fetch("https://ipapi.co/json").then((function(e){return e.json()})).then((function(e){return{lat:e.latitude,lng:e.longitude}})))}))}))}function te(e){return fetch(Q,{method:"POST",body:e}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){console.error(e)}))}var ne=n(81),ae=(n(176),n(113)),re=n.n(ae),ce=n(114),ie=n.n(ce);n(177);Object(ne.registerPlugin)(re.a,ie.a);var oe=function(){var e=Object(r.useState)([]),t=Object(w.a)(e,2),n=t[0],c=t[1],i={latitude:"",longitude:"",GPSAltitude:"",GPSImgDirection:"",imageName:"",imageType:"",captureDate:Date},o=function(){var e=Object(B.a)(T.a.mark((function e(t){var a,r,c,o,s,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData(t.target),t.preventDefault(),a.set("bildefil",n[0].file),r=a.get("bildefil"),i.imageType=r.type,i.imageName=r.name,i.captureDate=new Date(r.lastModifiedDate),e.next=9,J.a.gps(r).catch(console.error);case 9:if(null==e.sent){e.next=27;break}return e.next=13,J.a.gps(r);case 13:return i.latitude=e.sent.latitude,e.next=16,J.a.gps(r);case 16:return i.longitude=e.sent.longitude,e.next=19,J.a.parse(r,["GPSAltitude"]);case 19:return c=e.sent,e.next=22,J.a.parse(r,["GPSImgDirection"]);case 22:o=e.sent,i.GPSAltitude=c.GPSAltitude,i.GPSImgDirection=o.GPSImgDirection,e.next=30;break;case 27:console.log("Det finnes ikke "),"E6 Kvithammar - \xc5sen"===a.get("prosjekt")&&(s=[63.490445,10.873416],i.latitude=s[0],i.longitude=s[1]),"E39 Mandal"===a.get("prosjekt")&&(l=[58.028566,7.523384],i.latitude=l[0],i.longitude=l[1]);case 30:return a.append("imageType",i.imageType),a.append("imageName",i.imageName),a.append("latitude",i.latitude),a.append("longitude",i.longitude),a.append("GPSAltitude",i.GPSAltitude),a.append("GPSImgDirection",i.GPSImgDirection),a.append("captureDate",i.captureDate),a.delete("filepond"),console.log("Structure of formdata"+Object(P.a)(a)),e.prev=39,e.next=42,te(a);case 42:e.next=47;break;case 44:e.prev=44,e.t0=e.catch(39),console.error(e.t0);case 47:case"end":return e.stop()}}),e,null,[[39,44]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(K.a,{onSubmit:o,className:"body",children:[Object(a.jsxs)(F.a,{children:[Object(a.jsx)(H.a,{for:"prosjekt",children:"Prosjekt"}),Object(a.jsxs)(R.a,{type:"select",name:"prosjekt",id:"prosjekt",placeholder:"velg prosjekt",children:[Object(a.jsx)("option",{children:"E6 Kvithammar - \xc5sen"}),Object(a.jsx)("option",{children:"E39 Mandal"})]})]}),Object(a.jsxs)(F.a,{children:[Object(a.jsx)(H.a,{for:"parsell",children:"Parsellnummer"}),Object(a.jsx)(R.a,{type:"number",name:"parsell",id:"parsell",placeholder:"Parselnummer",required:!0})]}),Object(a.jsxs)(F.a,{children:[Object(a.jsx)(H.a,{for:"kategori",children:"Kategori"}),Object(a.jsxs)(R.a,{type:"select",name:"kategori",id:"kategori",multiple:!0,children:[Object(a.jsx)("option",{children:"Elektro"}),Object(a.jsx)("option",{children:"Fjellsikring"}),Object(a.jsx)("option",{children:"Fundamentering"}),Object(a.jsx)("option",{children:"Geomatikk"}),Object(a.jsx)("option",{children:"Konstruksjon"}),Object(a.jsx)("option",{children:"Riving og sanering"}),Object(a.jsx)("option",{children:"Tunnel"}),Object(a.jsx)("option",{children:"Vann og avl\xf8p"}),Object(a.jsx)("option",{children:"Veg"}),Object(a.jsx)("option",{children:"Markedsbilder"})]}),Object(a.jsx)(_.a,{color:"muted",children:'Velg flere kategorier ved \xe5 holde inne "command" eller "Alt" p\xe5 tastaturet.'})]}),Object(a.jsx)(F.a,{children:Object(a.jsx)(ne.FilePond,{files:n,onupdatefiles:c,name:"filepond",id:"filepond",acceptedFileTypes:["image/jpeg","image/jpg","image/png"],labelIdle:'Dra & Slippe filene eller <span class="filepond--label-action"> Bla Gjennom </span>'})}),Object(a.jsx)(F.a,{check:!0,children:Object(a.jsxs)(H.a,{check:!0,children:[Object(a.jsx)(R.a,{type:"checkbox",required:!0})," Godta at H\xe6hre kan bruke bildene"]})}),Object(a.jsx)(q.a,{type:"submit",color:"info",children:"Last opp"})]})},se=n(10),le=n.n(se),ue=n.p+"static/media/position.5085c436.svg",je=n.p+"static/media/rar.be30cbbf.svg",pe=new le.a.icon({iconUrl:ue,iconSize:[35,51],iconAnchor:[17,51],popupAnchor:[2,-40]}),de=new le.a.icon({iconUrl:je,iconSize:[20,20]}),be=(n(178),n(179),[{value:[63.55144,10.933473],label:"E6 Kvithammar - \xc5sen"},{value:[58.093886,7.644329],label:"E39 Mandal"},{value:[59.001439,9.613338],label:"E18 Rugtvedt D\xf8rdal"}]),he=[[63.490113,10.881942],[63.539078,10.784397],[63.611563,11.037967],[63.604848,11.073352]],ge=[[59.03421,9.695156],[59.042688,9.653614],[58.972837,9.452311],[58.95372,9.486643]],Oe=[[58.022543,7.496523],[58.038903,7.469057],[58.109921,7.638652],[58.105165,7.807159],[58.089601,7.804134]],xe=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={location:{lat:63.430515,lng:10.395053},positionCoord:{lat:0,lng:0},haveUsersLocation:!1,zoom:5,selectedOption:null,changeDate:!1,dateValues:[new Date,new Date],images:[],urls:[]},e.handleChange=function(t){e.setState({location:{lat:t.value[0],lng:t.value[1]},selectedOption:t,zoom:11}),X(t.label).then((function(t){e.setState({images:t.files})}))},e.getPositionOfUser=function(){ee().then((function(t){e.setState({positionCoord:t,haveUsersLocation:!0})}))},e.dateChanged=function(t){console.log(t),e.setState({changeDate:!0})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;(function(){return W.apply(this,arguments)})().then((function(t){e.setState({images:t.images})}))}},{key:"render",value:function(){var e=this,t=[this.state.location.lat,this.state.location.lng],n=this.state,r=n.selectedOption,c=n.positionCoord;return Object(a.jsxs)("div",{className:"app",children:[Object(a.jsxs)(p.a,{className:"map",center:t,zoom:this.state.zoom,children:[Object(a.jsx)(d.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(a.jsx)(D.a,{position:"topleft",children:Object(a.jsxs)("button",{onClick:this.getPositionOfUser,children:["Min ",Object(a.jsx)("br",{}),"Posisjon"]})}),this.state.haveUsersLocation?Object(a.jsx)(b.a,{position:c,icon:pe,children:Object(a.jsx)(h.a,{children:"Din posisjon:)"})}):"",Object(a.jsx)(x.a,{children:this.state.images.length>0&&this.state.images.map((function(e){return Object(a.jsx)(b.a,{position:[e.latitude,e.longitude],icon:de,rotationAngle:e.GPSImgDirection,children:Object(a.jsxs)(h.a,{children:[Object(a.jsx)("b",{children:"Prosjekt: "}),e.prosjekt," ",e.prosjektOmrade,Object(a.jsx)("p",{}),Object(a.jsx)("b",{children:"Parsell: "}),e.parsell,Object(a.jsx)("p",{}),Object(a.jsx)("b",{children:"Kategori: "}),e.kategori,Object(a.jsx)("p",{}),Object(a.jsx)("b",{children:"H\xf8ydemeter: "}),e.GPSAltitude,Object(a.jsx)("p",{}),Object(a.jsx)("b",{children:"Dato tatt: "}),e.captureDate,Object(a.jsx)("p",{}),Object(a.jsx)("img",{src:"".concat(Z(e.imageName)),alt:e.imageName,className:"popupImage"})]})},e._id)}))}),Object(a.jsx)(g.a,{onclick:function(){return e.setState({location:{lat:63.55144,lng:10.933473},zoom:11})},color:"blue",positions:he}),Object(a.jsx)(g.a,{onclick:function(){return e.setState({location:{lat:59.001439,lng:9.613338},zoom:11})},color:"#d46504",positions:ge}),Object(a.jsx)(g.a,{onclick:function(){return e.setState({location:{lat:58.093886,lng:7.644329},zoom:11})},color:"blue",positions:Oe})]}),Object(a.jsxs)(m.a,{className:"message-form",children:[Object(a.jsx)(f.a,{className:"title",children:"Bildelagring"}),Object(a.jsxs)(y.d,{children:[Object(a.jsxs)(y.b,{children:[Object(a.jsx)(y.a,{children:"S\xf8k i Bilder"}),Object(a.jsx)(y.a,{children:"Last opp Bilder"})]}),Object(a.jsxs)(y.c,{children:[Object(a.jsx)("p",{children:Object(a.jsx)("b",{children:"Velg verdier for s\xf8ket ditt"})}),Object(a.jsx)(z,{}),Object(a.jsx)(k.a,{className:"select-option",value:r,onChange:this.handleChange,options:be,placeholder:"velg prosjekt",menuColor:"blue"}),Object(a.jsx)(U,{}),Object(a.jsx)(G,{className:"multi-select"}),Object(a.jsx)(E,{}),Object(a.jsx)(V,{images:this.images})]}),Object(a.jsxs)(y.c,{children:[Object(a.jsxs)(v.a,{children:[" ",Object(a.jsx)("b",{children:"Last oppp bilder:"})]}),Object(a.jsx)(oe,{})]})]})]})]})}}]),n}(r.Component);o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(xe,{})}),document.getElementById("root"))}},[[185,1,2]]]);
//# sourceMappingURL=main.8dface2c.chunk.js.map